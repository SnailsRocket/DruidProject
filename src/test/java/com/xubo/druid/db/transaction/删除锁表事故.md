### 删除(修改)时数据库锁表

#### 参考博客
https://blog.csdn.net/u010882234/article/details/116564545


> 后面又遇到一次，信息删除时报错，查看了下，发现数据量不是特别大，其他业务数据库查询也很正常
>  追踪了错误日志，也是Lock wait timeout，但是把sql单独执行，发现很快
>  判断应该是其他业务请求返回很慢，一直挂起等待返回，导致同一个线程的删除服务的SQL执行超时，回滚
>  查看了具体的业务，删除mysql信息时，需要同步删除elasticsearch的索引信息。删除索引出错，设置的超时时间又很长，
>  比mysql执行超时时间还长，进而一直未报elasticsearch的超时错误而报了mysql的超时错误
>  对elasticsearch删除问题进行了处理，并将索引操作另起线程，放入线程池执行，问题解决
>
>
>

#### 总结
其他业务请求返回很慢，导致同一个线程的删除服务的sql执行超时，导致回滚

