## 最近做项目的一点反思


最近做了锦州银行、建设银行的支付对接，以及工会积分商城这个小程序。这些项目的大部分逻辑都是来自于公司去年开发的买个宝小程序。
然后针对每个合作方定制化开发一个H5小程序。这样的操作会有一个很严重的问题。如果母版(基础版-买个宝商城)出现bug，那么上面对接
的所有h5都是存在这种问题的。而且这样的维护成本会很高，一旦发现一个bug，所有的h5都得去维护，这样无效的工作量就很大。


### 优化方案1
所有的逻辑做到一套系统里面，根据前端传送的渠道分别执行相应的逻辑。这样做的问题是一旦这个服务崩了，所有的合作方的服务都会受到影响。
而且所有的逻辑都写在一个服务里面，后面合作方越多，代码逻辑越复杂。后期维护困难。


### 服务拆分
将单体拆成 
订单服务 支付服务 用户服务 商品服务 秒杀服务 团购服务 首页服务 公共服务

#### 优点 
pv uv
服务拆分确实是一种优秀的设计方案。代码耦合度低，服务之前互不影响（当一个服务宕机之后，其他服务依旧正常运转，服务之前通过服务注册中心进行调用），
服务更容易维护，容错性更高。可以承载更大的并发量。


#### 缺点 
待完善
分布式系统是复杂的，开发起来更加困难。分布式事务时候一个很大的问题。(异常情况很多，并发量大的时候，某个服务宕机，如何保证数据一致性，服务的可用性)
部署新的功能，需要保证各个服务之间的一致性(一旦有些地方考虑不周全，整个项目都会出现 错误数据(测试时规避该问题))

