## 积分商城测试及上线bug复盘



#### 出现的问题

> 1、返回参数问题-给前端返回null
>
> 2、订单状态小程序&运营后台展示（待支付 待付款 待收货 申请售后 查看售后）以前留下的坑(母订单子订单状态-售后不修改订单表的状态)
>
> 3、支付积分提示问题
>
> 4、支付校验用户是否是企业白名单提示问题
>
> 5、退款-扣减积分问题(母订单状态-子订单售后，调用积分服务时，传输的是所有商品的goodsId)
>
> 6、运营后台-订单多场景发货问题
>
> 7、订单查询新增渠道编号(之前的坑)
>
> 8、点击商品详情，提示该商品不是秒杀商品(新增渠道 - 之前的坑)









### 复盘



#### **问题1**

> 前期开发，支付流程没有搞清楚，直接在原有的逻辑上进行积分支付的修改。没有考虑积分业务逻辑的提示(积分不足、白名单)，以及积分业务逻辑的扣款流程，以及校验流程(后期出现了一个积分不足的校验就是因为去支付的时候没有校验当前订单是否扣减积分(用户扣减过积分，但是未付进行微信支付，此时订单进入待支付状态，进入订单详情，点击去支付，此时又校验了该用户的积分是够充足(这个时候不应该去校验(假设该用户积分不足，但是该用户的这笔订单还是可以支付的。))))。



#### **问题2**

> 订单状态流转问题，这个是之前留下的坑，首先得仔细阅读代码，理清之前的业务逻辑。再进行修改。

















